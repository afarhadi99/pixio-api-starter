{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alish/Documents/GitHub/pixio-api-starter/apps/web/src/lib/validators/auth.ts"],"sourcesContent":["// src/lib/validators/auth.ts\r\nimport { z } from 'zod';\r\n\r\nexport const loginSchema = z.object({\r\n  email: z.string().email({ message: 'Please enter a valid email address' }),\r\n  password: z.string().min(1, { message: 'Password is required' }),\r\n});\r\n\r\nexport const signupSchema = z.object({\r\n  email: z.string().email({ message: 'Please enter a valid email address' }),\r\n  password: z.string().min(8, { message: 'Password must be at least 8 characters' }),\r\n  full_name: z.string().min(1, { message: 'Name is required' }).optional(),\r\n});\r\n\r\nexport const updateProfileSchema = z.object({\r\n  full_name: z.string().min(1, { message: 'Name is required' }),\r\n  avatar_url: z.string().optional(),\r\n});\r\n\r\nexport type TLoginSchema = z.infer<typeof loginSchema>;\r\nexport type TSignupSchema = z.infer<typeof signupSchema>;\r\nexport type TUpdateProfileSchema = z.infer<typeof updateProfileSchema>;\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;AAC7B;;AAEO,MAAM,cAAc,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC;QAAE,SAAS;IAAqC;IACxE,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAuB;AAChE;AAEO,MAAM,eAAe,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACnC,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC;QAAE,SAAS;IAAqC;IACxE,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAyC;IAChF,WAAW,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAmB,GAAG,QAAQ;AACxE;AAEO,MAAM,sBAAsB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1C,WAAW,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAmB;IAC3D,YAAY,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AACjC","debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alish/Documents/GitHub/pixio-api-starter/apps/web/src/lib/config/pricing.ts"],"sourcesContent":["// src/lib/config/pricing.ts\r\nexport interface PricingTier {\r\n  id: 'free' | 'pro' | 'business';\r\n  name: string;\r\n  description: string;\r\n  features: string[];\r\n  popular: boolean;\r\n  credits: number; // Added credits field\r\n  // Each tier can have monthly and yearly pricing options\r\n  pricing: {\r\n    monthly: {\r\n      priceId: string | null; // Stripe Price ID\r\n      amount: number | null;  // Amount in cents\r\n    };\r\n    yearly: {\r\n      priceId: string | null; // Stripe Price ID\r\n      amount: number | null;  // Amount in cents\r\n      discount?: number;      // Optional percentage discount compared to monthly\r\n    };\r\n  };\r\n}\r\n\r\n// Read price IDs from environment variables\r\nexport const STRIPE_PRICE_IDS = {\r\n  PRO_MONTHLY: process.env.NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY || '',\r\n  PRO_YEARLY: process.env.NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY || '',\r\n  BUSINESS_MONTHLY: process.env.NEXT_PUBLIC_STRIPE_PRICE_BUSINESS_MONTHLY || '',\r\n  BUSINESS_YEARLY: process.env.NEXT_PUBLIC_STRIPE_PRICE_BUSINESS_YEARLY || '',\r\n  // Credit pack price IDs\r\n  CREDIT_PACK_1000: process.env.NEXT_PUBLIC_STRIPE_PRICE_CREDIT_PACK_1000 || '',\r\n  CREDIT_PACK_2500: process.env.NEXT_PUBLIC_STRIPE_PRICE_CREDIT_PACK_2500 || '',\r\n  CREDIT_PACK_5000: process.env.NEXT_PUBLIC_STRIPE_PRICE_CREDIT_PACK_5000 || '',\r\n};\r\n\r\n// Define credit packs for purchase\r\nexport const CREDIT_PACKS = [\r\n  {\r\n    id: 'credits-1000',\r\n    name: '1000 Credits',\r\n    description: 'Top up with a small credit pack',\r\n    amount: 1000,\r\n    price: 1000, // $10 in cents\r\n    priceId: STRIPE_PRICE_IDS.CREDIT_PACK_1000,\r\n  },\r\n  {\r\n    id: 'credits-2500',\r\n    name: '2500 Credits',\r\n    description: 'Best value for regular users',\r\n    amount: 2500,\r\n    price: 2500, // $25 in cents\r\n    priceId: STRIPE_PRICE_IDS.CREDIT_PACK_2500,\r\n  },\r\n  {\r\n    id: 'credits-5000',\r\n    name: '5000 Credits',\r\n    description: 'Best value for power users',\r\n    amount: 5000,\r\n    price: 5000, // $50 in cents\r\n    priceId: STRIPE_PRICE_IDS.CREDIT_PACK_5000,\r\n  }\r\n];\r\n\r\n// Check if price IDs are configured\r\nconst isPricingConfigured = () => {\r\n  return (\r\n    STRIPE_PRICE_IDS.PRO_MONTHLY &&\r\n    STRIPE_PRICE_IDS.PRO_YEARLY &&\r\n    STRIPE_PRICE_IDS.BUSINESS_MONTHLY &&\r\n    STRIPE_PRICE_IDS.BUSINESS_YEARLY\r\n  );\r\n};\r\n\r\n// Show warning if price IDs are not configured in production\r\nif (process.env.NODE_ENV === 'production' && !isPricingConfigured()) {\r\n  console.warn('Warning: Stripe price IDs are not configured in environment variables.');\r\n}\r\n\r\nexport const PRICING_TIERS: PricingTier[] = [\r\n  {\r\n    id: 'free',\r\n    name: 'Free',\r\n    description: 'Essential features for individuals',\r\n    credits: 500, // 500 credits for free tier\r\n    features: [\r\n      'Basic dashboard access',\r\n      'Limited access to features',\r\n      'Community support',\r\n      '500 credits per month',\r\n    ],\r\n    popular: false,\r\n    pricing: {\r\n      monthly: {\r\n        priceId: null,\r\n        amount: null,\r\n      },\r\n      yearly: {\r\n        priceId: null,\r\n        amount: null,\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'pro',\r\n    name: 'Pro',\r\n    description: 'Perfect for professionals',\r\n    credits: 3000, // 3000 credits for pro tier\r\n    features: [\r\n      'Everything in Free',\r\n      'Advanced features',\r\n      'Priority support',\r\n      'Extended usage limits',\r\n      '3000 credits per month',\r\n    ],\r\n    popular: true,\r\n    pricing: {\r\n      monthly: {\r\n        priceId: STRIPE_PRICE_IDS.PRO_MONTHLY || null,\r\n        amount: 2900, // $29/month\r\n      },\r\n      yearly: {\r\n        priceId: STRIPE_PRICE_IDS.PRO_YEARLY || null,\r\n        amount: 29000, // $290/year\r\n        discount: 16,  // 16% discount compared to monthly\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'business',\r\n    name: 'Business',\r\n    description: 'For teams and organizations',\r\n    credits: 6000, // 6000 credits for business tier\r\n    features: [\r\n      'Everything in Pro',\r\n      'Enterprise features',\r\n      'Dedicated support',\r\n      'Custom integrations',\r\n      'Team management',\r\n      '6000 credits per month',\r\n    ],\r\n    popular: false,\r\n    pricing: {\r\n      monthly: {\r\n        priceId: STRIPE_PRICE_IDS.BUSINESS_MONTHLY || null,\r\n        amount: 5900, // $59/month\r\n      },\r\n      yearly: {\r\n        priceId: STRIPE_PRICE_IDS.BUSINESS_YEARLY || null,\r\n        amount: 59000, // $590/year\r\n        discount: 16,  // 16% discount compared to monthly\r\n      },\r\n    },\r\n  },\r\n];\r\n\r\n// Helper function to get a tier by ID\r\nexport function getTierById(id: string): PricingTier | undefined {\r\n  return PRICING_TIERS.find(tier => tier.id === id);\r\n}\r\n\r\n// Build a mapping of price IDs to tier information for easy lookup\r\nexport type PriceIdInfo = {\r\n  tierId: 'free' | 'pro' | 'business';\r\n  interval: 'monthly' | 'yearly';\r\n};\r\n\r\n// Create a map of price IDs to tier info\r\nexport const PRICE_ID_MAP: Record<string, PriceIdInfo> = {};\r\n\r\n// Populate the price ID map\r\nPRICING_TIERS.forEach(tier => {\r\n  // Add monthly price ID if exists\r\n  if (tier.pricing.monthly.priceId) {\r\n    PRICE_ID_MAP[tier.pricing.monthly.priceId] = {\r\n      tierId: tier.id as 'free' | 'pro' | 'business',\r\n      interval: 'monthly'\r\n    };\r\n  }\r\n\r\n  // Add yearly price ID if exists\r\n  if (tier.pricing.yearly.priceId) {\r\n    PRICE_ID_MAP[tier.pricing.yearly.priceId] = {\r\n      tierId: tier.id as 'free' | 'pro' | 'business',\r\n      interval: 'yearly'\r\n    };\r\n  }\r\n});\r\n\r\n// Helper function to get tier info from a price ID\r\nexport function getTierByPriceId(priceId: string | null | undefined): { \r\n  tier: PricingTier | undefined, \r\n  interval: 'monthly' | 'yearly' | undefined \r\n} {\r\n  if (!priceId) {\r\n    // Default to free tier with no interval\r\n    const freeTier = getTierById('free');\r\n    return { tier: freeTier, interval: undefined };\r\n  }\r\n\r\n  const priceInfo = PRICE_ID_MAP[priceId];\r\n\r\n  if (!priceInfo) {\r\n    // Price ID not found in our configuration\r\n    return { tier: undefined, interval: undefined };\r\n  }\r\n\r\n  const tier = getTierById(priceInfo.tierId);\r\n\r\n  return { \r\n    tier,\r\n    interval: priceInfo.interval\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alish/Documents/GitHub/pixio-api-starter/apps/web/src/lib/credits.ts"],"sourcesContent":["// src/lib/credits.ts\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { getSubscriptionTier } from '@/lib/supabase/subscriptions';\r\nimport { PRICING_TIERS } from '@/lib/config/pricing';\r\nimport { cache } from 'react';\r\nimport { supabaseAdmin } from '@/lib/supabase/admin';\r\n\r\n// Get credits based on subscription tier\r\nexport function getCreditsByTier(tier: 'free' | 'pro' | 'business'): number {\r\n  const tierData = PRICING_TIERS.find(t => t.id === tier);\r\n  return tierData?.credits || 0;\r\n}\r\n\r\n// Get user's total credits (cached)\r\nexport const getUserCredits = cache(async () => {\r\n  const supabase = await createClient();\r\n  \r\n  // Get current user\r\n  const { data: { user }, error: userError } = await supabase.auth.getUser();\r\n  if (userError || !user) {\r\n    return { subscriptionCredits: 0, purchasedCredits: 0, total: 0 };\r\n  }\r\n  \r\n  // Fetch user credits\r\n  const { data: userData, error: userDataError } = await supabase\r\n    .from('users')\r\n    .select('subscription_credits, purchased_credits')\r\n    .eq('id', user.id)\r\n    .single();\r\n  \r\n  if (userDataError || !userData) {\r\n    console.error('Error fetching user credits:', userDataError?.message);\r\n    return { subscriptionCredits: 0, purchasedCredits: 0, total: 0 };\r\n  }\r\n  \r\n  const subscriptionCredits = userData.subscription_credits || 0;\r\n  const purchasedCredits = userData.purchased_credits || 0;\r\n  \r\n  return {\r\n    subscriptionCredits,\r\n    purchasedCredits,\r\n    total: subscriptionCredits + purchasedCredits\r\n  };\r\n});\r\n\r\n// Reset subscription credits based on tier\r\nexport async function resetSubscriptionCredits(userId: string, tier: 'free' | 'pro' | 'business') {\r\n  const creditAmount = getCreditsByTier(tier);\r\n  \r\n  console.log(`Resetting subscription credits for user ${userId} to ${creditAmount} (${tier} tier)`);\r\n  \r\n  const { error } = await supabaseAdmin\r\n    .from('users')\r\n    .update({\r\n      subscription_credits: creditAmount,\r\n      last_credits_reset_date: new Date().toISOString()\r\n    })\r\n    .eq('id', userId);\r\n  \r\n  if (error) {\r\n    console.error('Error resetting subscription credits:', error.message);\r\n    return false;\r\n  }\r\n  \r\n  console.log(`Successfully reset credits to ${creditAmount} for user ${userId}`);\r\n  return true;\r\n}\r\n\r\n// Add purchased credits to user account\r\nexport async function addPurchasedCredits(userId: string, amount: number) {\r\n  // Get current purchased credits\r\n  const { data: userData, error: fetchError } = await supabaseAdmin\r\n    .from('users')\r\n    .select('purchased_credits')\r\n    .eq('id', userId)\r\n    .single();\r\n  \r\n  if (fetchError) {\r\n    console.error('Error fetching user data:', fetchError.message);\r\n    return false;\r\n  }\r\n  \r\n  const currentCredits = userData?.purchased_credits || 0;\r\n  const newTotal = currentCredits + amount;\r\n  \r\n  console.log(`Updating user ${userId} from ${currentCredits} to ${newTotal} purchased credits`);\r\n  \r\n  // Update purchased credits\r\n  const { error: updateError } = await supabaseAdmin\r\n    .from('users')\r\n    .update({ purchased_credits: newTotal })\r\n    .eq('id', userId);\r\n  \r\n  if (updateError) {\r\n    console.error('Error updating purchased credits:', updateError.message);\r\n    return false;\r\n  }\r\n  \r\n  console.log(`Successfully updated credits to ${newTotal}`);\r\n  return true;\r\n}\r\n\r\n// Use credits (first use subscription credits, then purchased)\r\nexport async function useCredits(userId: string, amount: number, description: string = '') {\r\n  const supabase = await createClient();\r\n  \r\n  // Get current credits\r\n  const { data: userData, error: fetchError } = await supabase\r\n    .from('users')\r\n    .select('subscription_credits, purchased_credits')\r\n    .eq('id', userId)\r\n    .single();\r\n  \r\n  if (fetchError) {\r\n    console.error('Error fetching user credits:', fetchError.message);\r\n    return false;\r\n  }\r\n  \r\n  const subscriptionCredits = userData?.subscription_credits || 0;\r\n  const purchasedCredits = userData?.purchased_credits || 0;\r\n  \r\n  // Check if user has enough credits\r\n  if (subscriptionCredits + purchasedCredits < amount) {\r\n    return false; // Not enough credits\r\n  }\r\n  \r\n  // Use subscription credits first\r\n  let remainingAmount = amount;\r\n  let newSubscriptionCredits = subscriptionCredits;\r\n  let newPurchasedCredits = purchasedCredits;\r\n  \r\n  if (subscriptionCredits >= remainingAmount) {\r\n    newSubscriptionCredits -= remainingAmount;\r\n    remainingAmount = 0;\r\n  } else {\r\n    remainingAmount -= subscriptionCredits;\r\n    newSubscriptionCredits = 0;\r\n    \r\n    // Use purchased credits for the remainder\r\n    newPurchasedCredits -= remainingAmount;\r\n  }\r\n  \r\n  // Update credits using admin client for more reliable updates\r\n  const { error: updateError } = await supabaseAdmin\r\n    .from('users')\r\n    .update({\r\n      subscription_credits: newSubscriptionCredits,\r\n      purchased_credits: newPurchasedCredits\r\n    })\r\n    .eq('id', userId);\r\n  \r\n  if (updateError) {\r\n    console.error('Error updating credits:', updateError.message);\r\n    return false;\r\n  }\r\n  \r\n  // Record usage\r\n  const { error: usageError } = await supabaseAdmin\r\n    .from('credit_usage')\r\n    .insert({\r\n      user_id: userId,\r\n      amount,\r\n      description\r\n    });\r\n  \r\n  if (usageError) {\r\n    console.error('Error recording credit usage:', usageError.message);\r\n  }\r\n  \r\n  return true;\r\n}\r\n\r\n// Initialize credits for a new user (called when a user first signs up)\r\nexport async function initializeUserCredits(userId: string) {\r\n  // Free tier credits by default\r\n  const initialCredits = getCreditsByTier('free');\r\n  \r\n  console.log(`Initializing credits for new user ${userId} with ${initialCredits} credits`);\r\n  \r\n  const { error } = await supabaseAdmin\r\n    .from('users')\r\n    .update({\r\n      subscription_credits: initialCredits,\r\n      purchased_credits: 0,\r\n      last_credits_reset_date: new Date().toISOString()\r\n    })\r\n    .eq('id', userId);\r\n  \r\n  if (error) {\r\n    console.error('Error initializing user credits:', error.message);\r\n    return false;\r\n  }\r\n  \r\n  console.log(`Successfully initialized ${initialCredits} credits for user ${userId}`);\r\n  return true;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alish/Documents/GitHub/pixio-api-starter/apps/web/src/lib/actions/auth.actions.ts"],"sourcesContent":["// src/lib/actions/auth.actions.ts\r\n'use server';\r\n\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { redirect } from 'next/navigation';\r\nimport { cookies } from 'next/headers';\r\nimport { loginSchema, signupSchema, TLoginSchema, TSignupSchema, updateProfileSchema, TUpdateProfileSchema } from '@/lib/validators/auth';\r\nimport { initializeUserCredits } from '@/lib/credits';\r\n\r\nexport async function login(values: TLoginSchema) {\r\n  // Validate input\r\n  const validatedFields = loginSchema.safeParse(values);\r\n  if (!validatedFields.success) {\r\n    return { error: 'Invalid input' };\r\n  }\r\n\r\n  const { email, password } = validatedFields.data;\r\n  \r\n  // Call cookies to prevent caching\r\n  cookies();\r\n\r\n  const supabase = await createClient();\r\n  \r\n  const { error } = await supabase.auth.signInWithPassword({\r\n    email,\r\n    password,\r\n  });\r\n  \r\n  if (error) {\r\n    return { error: error.message };\r\n  }\r\n  \r\n  redirect('/dashboard');\r\n}\r\n\r\nexport async function signup(values: TSignupSchema) {\r\n  // Validate input\r\n  const validatedFields = signupSchema.safeParse(values);\r\n  if (!validatedFields.success) {\r\n    return { error: 'Invalid input' };\r\n  }\r\n\r\n  const { email, password, full_name } = validatedFields.data;\r\n  \r\n  // Call cookies to prevent caching\r\n  cookies();\r\n\r\n  const supabase = await createClient();\r\n  \r\n  const { data, error } = await supabase.auth.signUp({\r\n    email,\r\n    password,\r\n    options: {\r\n      emailRedirectTo: `${process.env.NEXT_PUBLIC_SITE_URL}/auth/callback`,\r\n      data: {\r\n        full_name,\r\n      },\r\n    },\r\n  });\r\n  \r\n  if (error) {\r\n    return { error: error.message };\r\n  }\r\n  \r\n  // Initialize credits for the new user\r\n  if (data.user) {\r\n    await initializeUserCredits(data.user.id);\r\n  }\r\n  \r\n  // Check if email confirmation is required\r\n  // Redirect to a confirmation page if needed\r\n  \r\n  redirect('/dashboard');\r\n}\r\n\r\nexport async function logout() {\r\n  const supabase = await createClient();\r\n  await supabase.auth.signOut();\r\n  redirect('/');\r\n}\r\n\r\nexport async function updateProfile(values: TUpdateProfileSchema) {\r\n  // Validate input\r\n  const validatedFields = updateProfileSchema.safeParse(values);\r\n  if (!validatedFields.success) {\r\n    return { error: 'Invalid input' };\r\n  }\r\n\r\n  const { full_name, avatar_url } = validatedFields.data;\r\n  \r\n  // Call cookies to prevent caching\r\n  cookies();\r\n\r\n  const supabase = await createClient();\r\n  \r\n  const { data: { user }, error: userError } = await supabase.auth.getUser();\r\n  \r\n  if (userError || !user) {\r\n    return { error: 'Authentication error' };\r\n  }\r\n  \r\n  // Update user metadata\r\n  const { error: updateAuthError } = await supabase.auth.updateUser({\r\n    data: { full_name, avatar_url },\r\n  });\r\n  \r\n  if (updateAuthError) {\r\n    return { error: updateAuthError.message };\r\n  }\r\n  \r\n  // Update public profile\r\n  const { error: updateProfileError } = await supabase\r\n    .from('users')\r\n    .update({\r\n      full_name,\r\n      avatar_url,\r\n    })\r\n    .eq('id', user.id);\r\n  \r\n  if (updateProfileError) {\r\n    return { error: updateProfileError.message };\r\n  }\r\n  \r\n  return { success: true };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alish/Documents/GitHub/pixio-api-starter/apps/web/.next-internal/server/app/%28marketing%29/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logout as '00fc883485173d4ad849041dce01f6a7a935bbb0cd'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alish/Documents/GitHub/pixio-api-starter/apps/web/src/app/%28marketing%29/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/apps/web/src/app/(marketing)/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/app/(marketing)/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAyS,GACtU,uEACA","debugId":null}},
    {"offset": {"line": 610, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alish/Documents/GitHub/pixio-api-starter/apps/web/src/app/%28marketing%29/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/apps/web/src/app/(marketing)/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/app/(marketing)/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqR,GAClT,mDACA","debugId":null}},
    {"offset": {"line": 624, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}